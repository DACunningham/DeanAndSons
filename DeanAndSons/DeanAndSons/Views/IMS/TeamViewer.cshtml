@using DeanAndSons.Models.IMS.ViewModels
@model HierarchyIndexViewModel

@{
    ViewBag.Title = "TeamViewer";
}

<link href="~/Content/Custom/FamilyTree.css" rel="stylesheet" />

@* ********** Page Header ********** *@

<div class="container-fluid dc-header">
    <div class="container">
        <header>

            <div class="logo1">Dean & Sons.</div>
            <div class="logo2">Family Estate Agency</div>
            <div class="col-md-12 dc-pageHead">
                <p class="pageTitle">Team Viewer - IMS</p>
            </div>

        </header>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">

            <h3>Your Immediate Hierarchical Tree</h3>
            <hr />

            <div class="tree">
                <ul>
                    <li>
                        <a href=@Url.Action("ProfileDetails", "Account", new { userID = Model.Superior.SuperiorID })>
                            <div class="row">
                                <div class="col-md-12">

                                    <img src=@Model.Superior.getImage(Model.Superior.Image).Location class="dc-FamilyTreeImg" alt="Profile Image" />

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    @Model.Superior.Forename @Model.Superior.Surname
                                </div>
                            </div>
                        </a>
                                <ul>
                                    <li>
                                        <a href=@Url.Action("ProfileDetails", "Account", new { userID = Model.StaffID })>
                                            <div class="row">
                                                <div class="col-md-12">

                                                    <img src=@Model.Image.Location class="dc-FamilyTreeImg" alt="Profile Image" />

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    @Model.Forename @Model.Surname
                                                </div>
                                            </div>
                                        </a>

                                        @if (Model.Subordinates.Count != 0)
                                        {
                                            <ul>
                                                @foreach (var item in Model.Subordinates)
                                                {

                                                    <li>
                                                        <a href=@Url.Action("ProfileDetails", "Account", new { userID = item.Id })>
                                                            <div class="row">
                                                                <div class="col-md-12">

                                                                    <img src=@item.getImage(item.Image).Location class="dc-FamilyTreeImg" alt="Profile Image" />

                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    @item.Forename @item.Surname
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </li>

                                                }
                                            </ul>
                                        }


                                    </li>
                                </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>